<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2022.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px 'Helvetica Neue'; color: #000000; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px 'Helvetica Neue'; color: #000000; -webkit-text-stroke: #000000; min-height: 15.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="en"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;Simple To-Do App with Pomodoro&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Custom styles can be added here if necessary, but prefer Tailwind classes */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>body {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif; /* Using Inter font as a common modern choice */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Style for the custom notification */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#notification {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Ensuring select dropdowns in tasks are not overly wide */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.priority-select {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>max-width: 100px; /* Adjust as needed */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Custom styling for pinned task */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.pinned-task {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>/* Example: Add a subtle border or background tint for pinned tasks if desired beyond button state */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>/* border-left: 4px solid #fbbf24; Tailwind: border-l-4 border-yellow-400 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Add a little more visual feedback for draggable items */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>li[draggable="true"] {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: grab;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>li[draggable="true"]:active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: grabbing;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col items-center pt-4 sm:pt-8 px-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="notification" class="fixed top-5 right-5 bg-blue-500 text-white py-2 px-4 rounded-lg shadow-md opacity-0 transform translate-y-[-20px] z-50"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>Notification Message</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="pomodoro" class="bg-white p-4 sm:p-6 rounded-xl shadow-lg w-full max-w-4xl mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;h1 class="text-2xl font-semibold text-center text-gray-700 mb-4"&gt;Pomodoro Timer&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="progress-bar-container bg-gray-200 rounded-full h-8 overflow-hidden relative mb-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="timer-label" class="absolute inset-0 flex items-center justify-center text-sm font-medium text-gray-700"&gt;25:00&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="progress-bar h-full bg-gradient-to-r from-green-400 to-blue-500 transition-all duration-500 ease-linear" id="progress" style="width: 0%;"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="timer-controls flex flex-col sm:flex-row justify-center items-center gap-2 mb-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="number" id="pomodoro-duration-input" class="border border-gray-300 rounded-lg px-3 py-2 text-sm w-full sm:w-auto focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Minutes (e.g., 25)" aria-label="Pomodoro duration in minutes"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button onclick="setPomodoroDuration()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg shadow-sm transition duration-150 w-full sm:w-auto text-sm"&gt;Set Duration&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="timer-actions flex justify-center gap-2 mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button onclick="startTimer()" class="bg-green-500 hover:bg-green-600 text-white p-2.5 rounded-lg shadow-sm transition duration-150" aria-label="Start Timer"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button onclick="pauseTimer()" class="bg-yellow-500 hover:bg-yellow-600 text-white p-2.5 rounded-lg shadow-sm transition duration-150" aria-label="Pause Timer"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25v13.5m-7.5-13.5v13.5" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button onclick="resetTimer()" class="bg-red-500 hover:bg-red-600 text-white p-2.5 rounded-lg shadow-sm transition duration-150" aria-label="Reset Timer"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div id="pomodoro-stats" class="text-center border-t border-gray-200 pt-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h2 class="text-lg font-semibold text-gray-600 mb-2"&gt;Session Stats (Today)&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p&gt;Focus Sessions: &lt;span id="focus-sessions-today" class="font-bold"&gt;0&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p&gt;Breaks Taken: &lt;span id="breaks-taken-today" class="font-bold"&gt;0&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p&gt;Total Focus Time: &lt;span id="total-focus-time-today" class="font-bold"&gt;0&lt;/span&gt; min&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="flex flex-col lg:flex-row gap-4 w-full max-w-4xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="column flex-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="app" class="bg-white p-4 sm:p-6 rounded-xl shadow-lg h-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h1 class="text-2xl font-semibold text-center text-gray-700 mb-4"&gt;To-Do List&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="todo-input" class="w-full px-4 py-2 mb-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter a task..." aria-label="Enter a task"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;ul id="todo-list" class="space-y-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/ul&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="column flex-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white p-4 sm:p-6 rounded-xl shadow-lg h-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-xl font-semibold text-gray-700 mb-4"&gt;Settings&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="space-y-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center justify-between"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="pomodoro-duration" class="text-sm font-medium text-gray-600"&gt;Focus Time (min)&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;input type="number" id="pomodoro-duration" value="25" class="border border-gray-300 rounded-lg px-3 py-2 text-sm w-24 focus:ring-2 focus:ring-blue-500 focus:border-transparent" aria-label="Focus time in minutes"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center justify-between"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="break-duration" class="text-sm font-medium text-gray-600"&gt;Break Time (min)&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;input type="number" id="break-duration" value="5" class="border border-gray-300 rounded-lg px-3 py-2 text-sm w-24 focus:ring-2 focus:ring-blue-500 focus:border-transparent" aria-label="Break time in minutes"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center justify-between"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="long-break-duration" class="text-sm font-medium text-gray-600"&gt;Long Break (min)&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;input type="number" id="long-break-duration" value="15" class="border border-gray-300 rounded-lg px-3 py-2 text-sm w-24 focus:ring-2 focus:ring-blue-500 focus:border-transparent" aria-label="Long break time in minutes"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center justify-between"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="sessions-before-long-break" class="text-sm font-medium text-gray-600"&gt;Sessions Before Long Break&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;input type="number" id="sessions-before-long-break" value="4" class="border border-gray-300 rounded-lg px-3 py-2 text-sm w-24 focus:ring-2 focus:ring-blue-500 focus:border-transparent" aria-label="Sessions before long break"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="auto-start-breaks" class="text-sm font-medium text-gray-600 mr-2"&gt;Auto-start Breaks&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;input type="checkbox" id="auto-start-breaks" class="mr-1 rounded-md text-blue-500 focus:ring-blue-500 h-5 w-5" aria-label="Auto-start breaks"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="auto-start-next-session" class="text-sm font-medium text-gray-600 mr-2"&gt;Auto-start Next Session&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;input type="checkbox" id="auto-start-next-session" class="rounded-md text-blue-500 focus:ring-blue-500 h-5 w-5" aria-label="Auto-start next session"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button onclick="saveSettings()" class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg shadow-sm transition duration-150 text-sm"&gt;Save Settings&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// --- Globals ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let timerInterval;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let timeRemaining;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let pomodoroDuration = 25; // Default Pomodoro duration</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let breakDuration = 5;<span class="Apple-converted-space">    </span>// Default break duration</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let longBreakDuration = 15;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let sessionsBeforeLongBreak = 4;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let sessionsCompleted = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let isPaused = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let isBreakTime = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let autoStartBreaks = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let autoStartNextSession = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let focusSessionsToday = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let breaksTakenToday = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let totalFocusTimeToday = 0; // in minutes</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let durationChanged = false; //Flag to track duration change</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let currentTask = null; // Track the current task</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let tasklist = []; //Array to hold tasks</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let nextTaskId = 0; //Keep track of the next task ID</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// --- DOM Elements ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const timerLabel = document.getElementById('timer-label');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const progressBar = document.getElementById('progress');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const pomodoroDurationInput = document.getElementById('pomodoro-duration-input');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const todoInput = document.getElementById('todo-input');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const todoList = document.getElementById('todo-list');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const notificationContainer = document.getElementById('notification');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const focusSessionsTodayDisplay = document.getElementById('focus-sessions-today');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const breaksTakenTodayDisplay = document.getElementById('breaks-taken-today');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const totalFocusTimeTodayDisplay = document.getElementById('total-focus-time-today');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const settingsPomodoroDurationInput = document.getElementById('pomodoro-duration');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const settingsBreakDurationInput = document.getElementById('break-duration');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const settingsLongBreakDurationInput = document.getElementById('long-break-duration');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const settingsSessionsBeforeLongBreakInput = document.getElementById('sessions-before-long-break');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const settingsAutoStartBreaksCheckbox = document.getElementById('auto-start-breaks');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const settingsAutoStartNextSessionCheckbox = document.getElementById('auto-start-next-session');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// --- Functions ---</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Displays a notification message.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* @param {string} message - The message to display.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* @param {string} type - The type of notification ('success', 'error', 'info').</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function showNotification(message, type = 'info') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const notificationDiv = notificationContainer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>notificationDiv.textContent = message;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>notificationDiv.className = `fixed top-5 right-5 bg-${type === 'success' ? 'green' : type === 'error' ? 'red' : 'blue'}-500 text-white py-2 px-4 rounded-lg shadow-md opacity-0 transform translate-y-[-20px] z-50`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Trigger animation</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>notificationDiv.classList.add('opacity-100', 'translate-y-0');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>notificationDiv.classList.remove('opacity-100', 'translate-y-0');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}, 3000); // Remove after 3 seconds</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}, 10);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Updates the timer display.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function updateTimerDisplay() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const minutes = Math.floor(timeRemaining / 60);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const seconds = timeRemaining % 60;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const formattedTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>timerLabel.textContent = formattedTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.title = `${formattedTime} - ${isBreakTime ? 'Break' : 'Focus'} Time`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">             </span>// Calculate and update progress</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const totalTime = isBreakTime? breakDuration * 60 : pomodoroDuration*60;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const timePassed = totalTime - timeRemaining;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const percentage = (timePassed / totalTime) * 100;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>progressBar.style.width = `${percentage}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Starts the timer.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function startTimer() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (timerInterval) return;<span class="Apple-converted-space">  </span>// Prevent multiple timers running</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>isPaused = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>timerInterval = setInterval(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (timeRemaining &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timeRemaining--;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>updateTimerDisplay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>clearInterval(timerInterval);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timerInterval = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (!isBreakTime) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>sessionsCompleted++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>focusSessionsToday++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>totalFocusTimeToday += pomodoroDuration;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>updateStatsDisplay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (sessionsCompleted &gt;= sessionsBeforeLongBreak) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>isBreakTime = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>timeRemaining = longBreakDuration * 60;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>sessionsCompleted = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>showNotification(`Long break time! ${longBreakDuration} minutes.`, 'success');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                             </span>isBreakTime = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                             </span>timeRemaining = breakDuration * 60;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                             </span>showNotification(`Break time! ${breakDuration} minutes.`, 'success');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>else{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>isBreakTime = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>timeRemaining = pomodoroDuration * 60;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>showNotification("Focus time!", "success");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (autoStartBreaks || autoStartNextSession || !isBreakTime) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                         </span>startTimer();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>else{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>updateTimerDisplay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}, 1000);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Pauses the timer.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function pauseTimer() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>isPaused = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>clearInterval(timerInterval);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>timerInterval = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Resets the timer.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function resetTimer() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>pauseTimer();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>isBreakTime = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>timeRemaining = pomodoroDuration * 60;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>updateTimerDisplay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>progressBar.style.width = '0%';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>durationChanged = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.title = "To-Do App";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Sets the Pomodoro duration.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function setPomodoroDuration() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const newDuration = parseInt(pomodoroDurationInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (!isNaN(newDuration) &amp;&amp; newDuration &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pomodoroDuration = newDuration;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>timeRemaining = pomodoroDuration * 60;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateTimerDisplay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>showNotification(`Pomodoro duration set to ${pomodoroDuration} minutes.`, 'success');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>durationChanged = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>showNotification('Invalid duration. Please enter a positive number.', 'error');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Adds a new task to the to-do list.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function addTask() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const taskText = todoInput.value.trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">             </span>if (taskText === '') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>showNotification('Please enter a task.', 'error');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">             </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const newTask = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>id: nextTaskId++, //Assign an ID.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>text: taskText,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>completed: false,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>priority: 'Medium', //Default priority.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pinned: false,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>createdAt: Date.now() //Timestamp</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>tasklist.push(newTask); //Add to the task list</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>saveTasks(); // Save to localStorage</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>todoInput.value = ''; //Clear input</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>renderTaskList(); //Re-render</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>* Renders the task list</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function renderTaskList() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Clear the existing list</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>todoList.innerHTML = '';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Sort the task list: Pinned, then by priority, then by created date</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const sortedTasks = [...tasklist].sort((a, b) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (a.pinned &amp;&amp; !b.pinned) return -1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!a.pinned &amp;&amp; b.pinned) return 1;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Priority sorting (High &gt; Medium &gt; Low)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const priorityOrder = { 'High': 1, 'Medium': 2, 'Low': 3 };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const priorityComparison = priorityOrder[a.priority] - priorityOrder[b.priority];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (priorityComparison !== 0) return priorityComparison;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// If priorities are the same, sort by creation date (oldest first)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return a.createdAt - b.createdAt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Loop through the sorted tasks and create list items</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>sortedTasks.forEach(task =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const listItem = document.createElement('li');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.className = `flex items-center justify-between bg-white rounded-lg p-3 shadow-sm ${task.completed ? 'opacity-50' : ''} ${task.pinned ? 'pinned-task' : ''}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.draggable = "true"; //Make it draggable</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Task Text and Checkbox</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const taskContent = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>taskContent.className = "flex items-center gap-2";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const checkbox = document.createElement('input');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>checkbox.type = 'checkbox';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>checkbox.checked = task.completed;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>checkbox.className = 'form-checkbox h-5 w-5 text-blue-600 rounded-md focus:ring-blue-500 cursor-pointer';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>checkbox.addEventListener('change', () =&gt; toggleComplete(task.id));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const taskTextSpan = document.createElement('span');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>taskTextSpan.textContent = task.text;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>taskTextSpan.className = task.completed ? 'line-through text-gray-400' : 'text-gray-700';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>taskContent.appendChild(checkbox);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>taskContent.appendChild(taskTextSpan);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Priority Dropdown</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const prioritySelect = document.createElement('select');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>prioritySelect.className = 'priority-select border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const priorities = ['High', 'Medium', 'Low'];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>priorities.forEach(priority =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const option = document.createElement('option');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>option.value = priority;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>option.textContent = priority;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>option.selected = task.priority === priority;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>prioritySelect.appendChild(option);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>prioritySelect.addEventListener('change', (event) =&gt; updatePriority(task.id, event.target.value));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Pin Button</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const pinButton = document.createElement('button');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pinButton.className = `p-1 rounded-full focus:outline-none focus:ring-2 focus:ring-yellow-500 ${task.pinned ? 'bg-yellow-100 text-yellow-600' : 'text-gray-400 hover:text-yellow-600 hover:bg-yellow-100'}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pinButton.innerHTML = `&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;path fill-rule="evenodd" d="M5.05 3.636a1 1 0 011.414 0l3 3a1 1 0 011.414 0l3-3a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 01-1.414 0l-3 3a1 1 0 010 1.414l3-3zM8 10a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;path d="M3 17.25a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/svg&gt;`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pinButton.addEventListener('click', () =&gt; togglePin(task.id));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Delete Button</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const deleteButton = document.createElement('button');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>deleteButton.className = 'text-gray-400 hover:text-red-500 p-1 rounded-full focus:outline-none focus:ring-2 focus:ring-red-500';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>deleteButton.innerHTML = `&lt;svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/svg&gt;`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>deleteButton.addEventListener('click', () =&gt; deleteTask(task.id));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Append all elements</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.appendChild(taskContent);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.appendChild(prioritySelect);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.appendChild(pinButton);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.appendChild(deleteButton);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>todoList.appendChild(listItem);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Attach drag events</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.addEventListener('dragstart', (event) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>event.dataTransfer.setData('text/plain', task.id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>event.target.classList.add('opacity-50');<span class="Apple-converted-space">  </span>// Reduce opacity during drag</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.addEventListener('dragend', (event) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>event.target.classList.remove('opacity-50');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.addEventListener('dragover', (event) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>event.preventDefault(); // Needed for drop to work</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listItem.addEventListener('drop', (event) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>event.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const droppedTaskId = parseInt(event.dataTransfer.getData('text/plain'));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (droppedTaskId !== task.id) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                         </span>// Find the index of the dropped task</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const droppedIndex = tasklist.findIndex(t =&gt; t.id === droppedTaskId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>// Find the index of the task where it was dropped.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const dropIndex = tasklist.findIndex(t =&gt; t.id === task.id);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>// Remove the dropped task from its old position</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const [droppedTask] = tasklist.splice(droppedIndex, 1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>// Insert the dropped task at the new position</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>tasklist.splice(dropIndex, 0, droppedTask);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>saveTasks();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderTaskList(); // Re-render the list to show the new order</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Toggles the completion status of a task.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* @param {number} id - The ID of the task to toggle.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function toggleComplete(id) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const task = tasklist.find(t =&gt; t.id === id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (task) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>task.completed = !task.completed;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>saveTasks();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTaskList();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>showNotification(`Task "${task.text}" ${task.completed ? 'completed' : 'marked as incomplete'}.`, 'info');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Updates the priority of a task.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* @param {number} id - The ID of the task.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* @param {string} priority - The new priority ('High', 'Medium', 'Low').</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function updatePriority(id, priority) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const task = tasklist.find(t =&gt; t.id === id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (task) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>task.priority = priority;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>saveTasks();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTaskList(); // Re-render to update display</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>showNotification(`Priority of task "${task.text}" updated to ${priority}.`, 'info');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Toggles the pinned status of a task</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* @param {number} id - The ID of the task to toggle</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function togglePin(id) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const task = tasklist.find(t =&gt; t.id === id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (task) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>task.pinned = !task.pinned;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>saveTasks();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTaskList(); // Re-render</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>showNotification(`Task "${task.text}" ${task.pinned ? 'pinned' : 'unpinned'}.`, 'info');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Deletes a task from the list.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* @param {number} id - The ID of the task to delete.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function deleteTask(id) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const taskIndex = tasklist.findIndex(t =&gt; t.id === id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (taskIndex !== -1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const deletedTask = tasklist.splice(taskIndex, 1)[0]; //Remove and get the deleted task.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>saveTasks();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTaskList();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>showNotification(`Task "${deletedTask.text}" deleted.`, 'info');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Saves the tasks to localStorage.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function saveTasks() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tasks', JSON.stringify(tasklist));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Loads the tasks from localStorage.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function loadTasks() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const savedTasks = localStorage.getItem('tasks');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (savedTasks) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>try{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>tasklist = JSON.parse(savedTasks);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>//Ensure that the tasks loaded from storage have an ID.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if(tasklist.length &gt; 0 &amp;&amp; tasklist.every(task =&gt; task.id !== undefined)){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                         </span>nextTaskId = Math.max(...tasklist.map(t =&gt; t.id)) + 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>else{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                         </span>//If any task doesn't have an ID, re-generate IDs for all tasks.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                         </span>tasklist.forEach((task, index) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>task.id = index; //Simple ID generation</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                         </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                         </span>nextTaskId = tasklist.length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                         </span>saveTasks(); //Save the updated tasks with IDs.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>catch (error){</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>console.error("Error parsing tasks from localStorage", error);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>tasklist = []; //Reset to empty array on error.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>nextTaskId = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>localStorage.removeItem('tasks'); // Clear corrupted data</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>showNotification('Error loading tasks.<span class="Apple-converted-space">  </span>Starting with an empty task list.', 'error')</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>else{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>tasklist = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>nextTaskId = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>renderTaskList();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Updates the session statistics display.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function updateStatsDisplay() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>focusSessionsTodayDisplay.textContent = focusSessionsToday;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>breaksTakenTodayDisplay.textContent = breaksTakenToday;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>totalFocusTimeTodayDisplay.textContent = totalFocusTimeToday;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Saves the settings to localStorage</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function saveSettings() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('pomodoroDuration', settingsPomodoroDurationInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('breakDuration', settingsBreakDurationInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('longBreakDuration', settingsLongBreakDurationInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('sessionsBeforeLongBreak', settingsSessionsBeforeLongBreakInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('autoStartBreaks', settingsAutoStartBreaksCheckbox.checked);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('autoStartNextSession', settingsAutoStartNextSessionCheckbox.checked);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Update global variables</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>pomodoroDuration = parseInt(settingsPomodoroDurationInput.value) || 25;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>breakDuration = parseInt(settingsBreakDurationInput.value) || 5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>longBreakDuration = parseInt(settingsLongBreakDurationInput.value) || 15;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>sessionsBeforeLongBreak = parseInt(settingsSessionsBeforeLongBreakInput.value) || 4;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>autoStartBreaks = settingsAutoStartBreaksCheckbox.checked;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>autoStartNextSession = settingsAutoStartNextSessionCheckbox.checked;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>timeRemaining = pomodoroDuration * 60;<span class="Apple-converted-space">  </span>// Reset timer based on new settings.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>updateTimerDisplay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>showNotification('Settings saved successfully!', 'success');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/**</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>* Loads the settings from localStorage</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function loadSettings() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>settingsPomodoroDurationInput.value = localStorage.getItem('pomodoroDuration') || '25';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>settingsBreakDurationInput.value = localStorage.getItem('breakDuration') || '5';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>settingsLongBreakDurationInput.value = localStorage.getItem('longBreakDuration') || '15';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>settingsSessionsBeforeLongBreakInput.value = localStorage.getItem('sessionsBeforeLongBreak') || '4';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>settingsAutoStartBreaksCheckbox.checked = localStorage.getItem('autoStartBreaks') === 'true';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>settingsAutoStartNextSessionCheckbox.checked = localStorage.getItem('autoStartNextSession') === 'true';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Update global variables</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>pomodoroDuration = parseInt(settingsPomodoroDurationInput.value) || 25;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>breakDuration = parseInt(settingsBreakDurationInput.value) || 5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>longBreakDuration = parseInt(settingsLongBreakDurationInput.value) || 15;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>sessionsBeforeLongBreak = parseInt(settingsSessionsBeforeLongBreakInput.value) || 4;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>autoStartBreaks = settingsAutoStartBreaksCheckbox.checked;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>autoStartNextSession = settingsAutoStartNextSessionCheckbox.checked;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>timeRemaining = pomodoroDuration * 60; //set initial time.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// --- Event Listeners ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById('todo-input').addEventListener('keydown', (event) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (event.key === 'Enter') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>addTask();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// --- Initial Load ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>loadTasks();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>loadSettings();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>updateTimerDisplay(); // Initial display</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
